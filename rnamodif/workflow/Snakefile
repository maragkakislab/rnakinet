from pathlib import Path
from rnamodif.workflow.training_configs import training_configs
from rnamodif.workflow.evaluation_configs import comparisons, time_data, individual_exps, prediction_type, pooling, model_name


configfile: "config.yml"

include: "rules/basecalling.smk"
include: "rules/alignment.smk"
include: "rules/data_split.smk"
include: "rules/inference.smk"
include: "rules/visualizations.smk"
include: "rules/diff_exp.smk"
include: "rules/training.smk"


rule all:
    input:
        # expand('outputs/visual/{prediction_type}/{model_name}/{experiment_name}/{pooling}_pooling_decay_plot.pdf',
        #     prediction_type=prediction_type, 
        #     model_name = model_name, 
        #     pooling=pooling,
        #     experiment_name=individual_exps,
        # ),
        # expand('checkpoints_pl/{model}/DONE.txt', model=training_configs.keys())
        expand('outputs/visual/{prediction_type}/{model_name}/{pooling}_ALL_DONE.txt',
            prediction_type=prediction_type, 
            model_name = model_name, 
            pooling=pooling,
        ),
        # expand("outputs/alignment/{experiment_name}/flagstat_transcriptome.txt", experiment_name=individual_exps)
        
        # expand('outputs/visual/diff_exp/{time}/{column}.pdf',
        #        time=time_data.keys(),
        #        column=['padj','pvalue'],
        # )
        # 'outputs/predictions_limited/CUSTOM_allneg_maxpool/20210202_hsa_dRNA_HeLa_5EU_2hr_Ars_0060m_5P_2/windows.pickle'
        # 'checkpoints_pl/2022_allneg_w05/DONE.txt',
        
        # expand("outputs/{prediction_type}/{model_name}/{experiment_name}/{pooling}_pooling_gene_level_predictions.tsv",
        #     experiment_name=individual_exps,
        #     prediction_type=prediction_type,
        #     model_name=model_name,
        #     pooling=pooling,
        # )