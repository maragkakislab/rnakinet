from pathlib import Path

comparisons = {
    # 'test_nanoid':{
    #     'positives':[
    #         '20180514_1054_K562_5EU_1440_labeled_run_TEST',
    #         '20180514_1541_K562_5EU_1440_labeled_II_run_TEST',
    #         '20180516_1108_K562_5EU_1440_labeled_III_run_TEST',
    #     ],
    #     'negatives':[
    #         '20180327_1102_K562_5EU_0_unlabeled_run_TEST',
    #         '20180403_1102_K562_5EU_0_unlabeled_II_run_TEST',
    #         '20180403_1208_K562_5EU_0_unlabeled_III_run_TEST',
    #     ],
    # },
}

clf_tuples = {
    # '5eu_datasets':{
    #     'test_nanoid_rep1':{
    #         'positives':'20180514_1054_K562_5EU_1440_labeled_run_TEST',
    #         'negatives':'20180327_1102_K562_5EU_0_unlabeled_run_TEST',
    #     },
    #     'test_nanoid_rep2':{
    #         'positives':'20180514_1541_K562_5EU_1440_labeled_II_run_TEST',
    #         'negatives':'20180403_1102_K562_5EU_0_unlabeled_II_run_TEST',
    #     },
    #     'test_nanoid_rep3':{
    #         'positives':'20180516_1108_K562_5EU_1440_labeled_III_run_TEST',
    #         'negatives':'20180403_1208_K562_5EU_0_unlabeled_III_run_TEST',
    #     },
    #     'test_2022_nia':{
    #         'positives':'20220303_hsa_dRNA_HeLa_5EU_polyA_REL5_2_TEST',
    #         'negatives':'20220520_hsa_dRNA_HeLa_DMSO_1_TEST',
    #     },
    #     'test_2020_nia':{
    #         'positives':'20201016_hsa_dRNASeq_HeLa_5EU_polyA_REL5_short_1_TEST',
    #         'negatives':'20201016_hsa_dRNASeq_HeLa_dmso_polyA_REL5_short_1_TEST',
    #     }
    # },
}

timesteps = {
    # 'ars_0m':[
    #     '20210111_hsa_dRNA_HeLa_5EU_1hr_ctrl_0000m_5P_1',
    #     '20210208_hsa_dRNA_HeLa_5EU_1hr_ctrl_0000m_5P_2',
    #     '20210208_hsa_dRNA_HeLa_5EU_1hr_ctrl_0000m_5P_3',
    # ],
    # 'ars_all_rep1':[
    #     '20210111_hsa_dRNA_HeLa_5EU_1hr_ctrl_0000m_5P_1',
    #     '20210128_hsa_dRNA_HeLa_5EU_2hr_NoArs_0030m_5P_1',
    #     '20201215_hsa_dRNA_HeLa_5EU_2hr_NoArs_0060m_5P_1',
    #     '20210111_hsa_dRNA_HeLa_5EU_2hr_NoArs_0090m_5P_1',
    #     '20201220_hsa_dRNA_HeLa_5EU_2hr_NoArs_0120m_5P_1',
    #     '20210114_hsa_dRNA_HeLa_5EU_2hr_NoArs_0180m_5P_1',
    #     '20201220_hsa_dRNA_HeLa_5EU_2hr_NoArs_0300m_5P_1',
    # ],
    # 'ars_all_rep2':[
    #     '20210208_hsa_dRNA_HeLa_5EU_1hr_ctrl_0000m_5P_2',
    #     '20210128_hsa_dRNA_HeLa_5EU_2hr_NoArs_0030m_5P_2',
    #     '20210202_hsa_dRNA_HeLa_5EU_2hr_NoArs_0060m_5P_2',
    #     '20210202_hsa_dRNA_HeLa_5EU_2hr_NoArs_0090m_5P_2',
    #     '20210205_hsa_dRNA_HeLa_5EU_2hr_NoArs_0120m_5P_2',
    #     '20210205_hsa_dRNA_HeLa_5EU_2hr_NoArs_0180m_5P_2',
    # ],
    # 'ars_all_rep3':[
    #     '20210208_hsa_dRNA_HeLa_5EU_1hr_ctrl_0000m_5P_3',
    #     '20210519_hsa_dRNA_HeLa_5EU_2hr_NoArs_0060m_5P_3',
    #     '20210519_hsa_dRNA_HeLa_5EU_2hr_NoArs_0090m_5P_3',
    # ],
    # 'ars_60mins':[
    #     '20201215_hsa_dRNA_HeLa_5EU_2hr_NoArs_0060m_5P_1',
    #     '20210202_hsa_dRNA_HeLa_5EU_2hr_NoArs_0060m_5P_2',
    #     '20210519_hsa_dRNA_HeLa_5EU_2hr_NoArs_0060m_5P_3',
    #     '20201215_hsa_dRNA_HeLa_5EU_2hr_Ars_0060m_5P_1',
    #     '20210202_hsa_dRNA_HeLa_5EU_2hr_Ars_0060m_5P_2',
    #     '20210519_hsa_dRNA_HeLa_5EU_2hr_Ars_0060m_5P_3',
    # ],
#     'test_nanoid_rep1':[
#         '20180514_1054_K562_5EU_1440_labeled_run_TEST',
#         '20180327_1102_K562_5EU_0_unlabeled_run_TEST',
#     ],
#     'test_nanoid_rep2':[
#         '20180514_1541_K562_5EU_1440_labeled_II_run_TEST',
#         '20180403_1102_K562_5EU_0_unlabeled_II_run_TEST',
#     ],
#     'test_nanoid_rep3':[
#         '20180516_1108_K562_5EU_1440_labeled_III_run_TEST',
#         '20180403_1208_K562_5EU_0_unlabeled_III_run_TEST',
#     ],
#     'test_2022_nia':[
#         '20220303_hsa_dRNA_HeLa_5EU_polyA_REL5_2_TEST',
#         '20220520_hsa_dRNA_HeLa_DMSO_1_TEST',
#     ],
#     'test_2020_nia':[
#         '20201016_hsa_dRNASeq_HeLa_5EU_polyA_REL5_short_1_TEST',
#         '20201016_hsa_dRNASeq_HeLa_dmso_polyA_REL5_short_1_TEST',
#     ],
    
#     'test_nanoid_all':[
#         '20180514_1054_K562_5EU_1440_labeled_run_TEST',
#         '20180514_1541_K562_5EU_1440_labeled_II_run_TEST',
#         '20180516_1108_K562_5EU_1440_labeled_III_run_TEST',
        
#         '20180327_1102_K562_5EU_0_unlabeled_run_TEST',
#         '20180403_1102_K562_5EU_0_unlabeled_II_run_TEST',
#         '20180403_1208_K562_5EU_0_unlabeled_III_run_TEST',
#     ],
}

individual_exps = [
        '20201215_hsa_dRNA_HeLa_5EU_2hr_NoArs_0060m_5P_1',
        '20210202_hsa_dRNA_HeLa_5EU_2hr_NoArs_0060m_5P_2',
        '20210519_hsa_dRNA_HeLa_5EU_2hr_NoArs_0060m_5P_3',
        '20201215_hsa_dRNA_HeLa_5EU_2hr_Ars_0060m_5P_1',
        '20210202_hsa_dRNA_HeLa_5EU_2hr_Ars_0060m_5P_2',
        '20210519_hsa_dRNA_HeLa_5EU_2hr_Ars_0060m_5P_3',
]

# prediction_type = 'predictions_limited'
prediction_type = 'predictions'

pooling = [
    # 'mean',
    'max',
]
model_name = [
    'CUSTOM_allneg_maxpool',
    # 'CUSTOM_maxpool',
    # 'narrow_standard',
    # 'narrow_weighted',
    'unlimited_standard_allneg',
]

configfile: "config.yml"

include: "rules/basecalling.smk"
include: "rules/alignment.smk"
include: "rules/data_split.smk"
include: "rules/inference.smk"
include: "rules/visualizations.smk"
include: "rules/diff_exp.smk"


rule all:
    input:
        expand('outputs/visual/{prediction_type}/{model_name}/{pooling}_ALL_DONE.txt',
            prediction_type=prediction_type, 
            model_name = model_name, 
            pooling=pooling,
        )
        # expand("outputs/{prediction_type}/{model_name}/{experiment_name}/{pooling}_pooling_gene_level_predictions.tsv",
        #     experiment_name=individual_exps,
        #     prediction_type=prediction_type,
        #     model_name=model_name,
        #     pooling=pooling,
        # )
        # expand('outputs/visual/diff_exp/{time}/{column}.pdf',
        #        time=timesteps.keys(),
        #        column=['padj','pvalue'],
        # )
        
        